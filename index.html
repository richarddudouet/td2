<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Correction du TD2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="correctrion_td2_pasàpas_files/libs/clipboard/clipboard.min.js"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/popper.min.js"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="correctrion_td2_pasàpas_files/libs/quarto-html/anchor.min.js"></script>
<link href="correctrion_td2_pasàpas_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="correctrion_td2_pasàpas_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="correctrion_td2_pasàpas_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="correctrion_td2_pasàpas_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="correctrion_td2_pasàpas_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#question-1-importez-les-deux-bases-de-données-du-td2-et-joignez-les-et-créez-un-objet-d_join-et-enregistrez-cette-base-en-rds." id="toc-question-1-importez-les-deux-bases-de-données-du-td2-et-joignez-les-et-créez-un-objet-d_join-et-enregistrez-cette-base-en-rds." class="nav-link active" data-scroll-target="#question-1-importez-les-deux-bases-de-données-du-td2-et-joignez-les-et-créez-un-objet-d_join-et-enregistrez-cette-base-en-rds.">Question 1 : Importez les deux bases de données du TD2 et joignez les et créez un objet d_join et enregistrez cette base en RDS.</a>
  <ul>
  <li><a href="#a.-dabord-il-faut-setup" id="toc-a.-dabord-il-faut-setup" class="nav-link" data-scroll-target="#a.-dabord-il-faut-setup">A. D’abord il faut setup</a>
  <ul>
  <li><a href="#a.-premièrement-créez-un-projet" id="toc-a.-premièrement-créez-un-projet" class="nav-link" data-scroll-target="#a.-premièrement-créez-un-projet">a. Premièrement: créez un projet</a></li>
  <li><a href="#b.-deuxièmement-créez-les-3-fichiers" id="toc-b.-deuxièmement-créez-les-3-fichiers" class="nav-link" data-scroll-target="#b.-deuxièmement-créez-les-3-fichiers">b. Deuxièmement : créez les 3 fichiers</a></li>
  <li><a href="#c.-troisièmement-créez-votre-script" id="toc-c.-troisièmement-créez-votre-script" class="nav-link" data-scroll-target="#c.-troisièmement-créez-votre-script">c.&nbsp;Troisièmement : créez votre script</a></li>
  <li><a href="#d.-cinquièmement-chargez" id="toc-d.-cinquièmement-chargez" class="nav-link" data-scroll-target="#d.-cinquièmement-chargez">d.&nbsp;Cinquièmement : chargez</a></li>
  <li><a href="#e.-sixièmement-se-rappelez-des-bases-et-de-la-logique-de-r" id="toc-e.-sixièmement-se-rappelez-des-bases-et-de-la-logique-de-r" class="nav-link" data-scroll-target="#e.-sixièmement-se-rappelez-des-bases-et-de-la-logique-de-r">e. Sixièmement : se rappelez des bases et de la logique de R</a></li>
  </ul></li>
  <li><a href="#b.-ensuite-vous-pouvez-importer-et-joindre-les-bases-de-donnée" id="toc-b.-ensuite-vous-pouvez-importer-et-joindre-les-bases-de-donnée" class="nav-link" data-scroll-target="#b.-ensuite-vous-pouvez-importer-et-joindre-les-bases-de-donnée">B. Ensuite vous pouvez importer et joindre les bases de donnée</a>
  <ul>
  <li><a href="#a.-importer" id="toc-a.-importer" class="nav-link" data-scroll-target="#a.-importer">a. Importer</a></li>
  <li><a href="#b.-joindre-les-bases" id="toc-b.-joindre-les-bases" class="nav-link" data-scroll-target="#b.-joindre-les-bases">b. Joindre les bases</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#question-2-cherchez-les-variables-qui-correspondent-et-créez-un-nouvel-objet-pour-lenregistrer-dans-lenvironnement-appelé-d." id="toc-question-2-cherchez-les-variables-qui-correspondent-et-créez-un-nouvel-objet-pour-lenregistrer-dans-lenvironnement-appelé-d." class="nav-link" data-scroll-target="#question-2-cherchez-les-variables-qui-correspondent-et-créez-un-nouvel-objet-pour-lenregistrer-dans-lenvironnement-appelé-d.">Question 2: Cherchez les variables qui correspondent et créez un nouvel objet pour l’enregistrer dans l’environnement appelé d.</a>
  <ul>
  <li><a href="#a.-chercher-les-variables" id="toc-a.-chercher-les-variables" class="nav-link" data-scroll-target="#a.-chercher-les-variables">A. Chercher les variables</a></li>
  <li><a href="#b.-creer-un-nouvel-objet-d-qui-sera-notre-base-de-travail" id="toc-b.-creer-un-nouvel-objet-d-qui-sera-notre-base-de-travail" class="nav-link" data-scroll-target="#b.-creer-un-nouvel-objet-d-qui-sera-notre-base-de-travail">B. Creer un nouvel objet d qui sera notre base de travail</a></li>
  </ul></li>
  <li><a href="#question-3-renommez-les-variables-en-français-pour-votre-confort-de-travail-à-laide-de-la-fonction-rename-ou-celle-que-vous-voulez" id="toc-question-3-renommez-les-variables-en-français-pour-votre-confort-de-travail-à-laide-de-la-fonction-rename-ou-celle-que-vous-voulez" class="nav-link" data-scroll-target="#question-3-renommez-les-variables-en-français-pour-votre-confort-de-travail-à-laide-de-la-fonction-rename-ou-celle-que-vous-voulez">Question 3: Renommez les variables en français pour votre confort de travail à l’aide de la fonction rename() (ou celle que vous voulez)</a>
  <ul>
  <li><a href="#a.-rappel-sur-le-pipe-et-le-tidyverse" id="toc-a.-rappel-sur-le-pipe-et-le-tidyverse" class="nav-link" data-scroll-target="#a.-rappel-sur-le-pipe-et-le-tidyverse">A. Rappel sur le pipe et le tidyverse</a></li>
  <li><a href="#b.-règles-à-respecter" id="toc-b.-règles-à-respecter" class="nav-link" data-scroll-target="#b.-règles-à-respecter">B. Règles à respecter</a></li>
  <li><a href="#c.-la-fonction-rename" id="toc-c.-la-fonction-rename" class="nav-link" data-scroll-target="#c.-la-fonction-rename">C. La fonction rename()</a></li>
  </ul></li>
  <li><a href="#question-4-calculez-limc-poidstaille2-en-créant-une-variable-imc-avec-mutate-ou-autre" id="toc-question-4-calculez-limc-poidstaille2-en-créant-une-variable-imc-avec-mutate-ou-autre" class="nav-link" data-scroll-target="#question-4-calculez-limc-poidstaille2-en-créant-une-variable-imc-avec-mutate-ou-autre">Question 4: Calculez l’IMC (poids/taille2) en créant une variable imc (avec mutate() ou autre)</a>
  <ul>
  <li><a href="#a.-comment-créer-une-variable" id="toc-a.-comment-créer-une-variable" class="nav-link" data-scroll-target="#a.-comment-créer-une-variable">A. Comment créer une variable ?</a></li>
  <li><a href="#b.-calculer-limc" id="toc-b.-calculer-limc" class="nav-link" data-scroll-target="#b.-calculer-limc">B. Calculer l’IMC</a></li>
  <li><a href="#c.-catégorisation-de-limc" id="toc-c.-catégorisation-de-limc" class="nav-link" data-scroll-target="#c.-catégorisation-de-limc">C. Catégorisation de l’IMC</a></li>
  <li><a href="#d.-verifiez-toujours-vos-nouvelles-variables" id="toc-d.-verifiez-toujours-vos-nouvelles-variables" class="nav-link" data-scroll-target="#d.-verifiez-toujours-vos-nouvelles-variables">D. VERIFIEZ TOUJOURS VOS NOUVELLES VARIABLES</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Correction du TD2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style>
h3 {
  margin-top: 1em;  /* espace avant chaque sous-titre h3 */
}

h4 {
  margin-top: 1em;  /* espace avant chaque sous-titre h3 */
}

h3 {
  border: 3px solid black;
  border-radius: 35px;
  padding: 1em;
}

h4 {
  display: inline-block;
  border: 3px solid black;
  border-radius: 35px;
  padding: 0.5em;
}

h5 {
  display: inline-block;
  border: 2px solid grey;
  border-radius: 35px;
  padding: 0.5em;
}

h6 {
  display: inline-block;
  border: 2px dotted gray;
  border-radius: 35px;
  padding: 0.5em;
  color: grey;
}


/* ——— Ajouts pour le pliage des sections ——— */
h3.foldable, h4.foldable, h5.foldable, h6.foldable {
  cursor: pointer;
  position: relative;
  padding-right: 2em; /* espace pour la flèche */
}
h3.foldable::after, h4.foldable::after, h5.foldable::after, h6.foldable::after {
  content: "▾";              /* flèche vers le bas = ouvert */
  position: absolute;
  right: 0.6em;
  top: 50%;
  transform: translateY(-50%);
  font-weight: 600;
}

/* Cache tout le contenu d’une section pliée, sauf son titre */
section.folded > :not(h2):not(h3):not(h4):not(h5):not(h6) { display: none; }
/* Cache les sous-sections imbriquées quand le parent est plié */
section.folded > section { display: none; }
/* Flèche fermée */
section.folded > .foldable::after { content: "▸"; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  // Niveaux de titres repliables (modifie si besoin)
  const foldableLevels = [ 3, 4, 5, 6];  // h3..h6

  // Pour plier automatiquement à l’ouverture à partir d’un niveau donné,
  // mets un nombre (ex: 4 pour plier h4+). Laisse null pour ne rien plier par défaut.
  const defaultCollapseFromLevel = 3;

  function toggle(sec, heading){
    const folded = sec.classList.toggle('folded');
    heading.setAttribute('aria-expanded', String(!folded));
  }

  foldableLevels.forEach(level => {
    document.querySelectorAll(`section.level${level}`).forEach(sec => {
      const heading = sec.querySelector(`:scope > h${level}`);
      if (!heading) return;

      // Accessibilité + style
      heading.classList.add('foldable');
      heading.setAttribute('role', 'button');
      heading.setAttribute('tabindex', '0');
      heading.setAttribute('aria-expanded', 'true');

      // Clic (en ignorant le clic sur l’ancre de lien du titre)
      heading.addEventListener('click', (e) => {
        if (e.target.closest('a')) return;
        toggle(sec, heading);
      });
      // Clavier (Entrée ou Espace)
      heading.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggle(sec, heading);
        }
      });

      // État initial (plié/déplié) configurable
      if (defaultCollapseFromLevel && level >= defaultCollapseFromLevel) {
        sec.classList.add('folded');
        heading.setAttribute('aria-expanded', 'false');
      }
    });
  });
});
</script>

<section id="question-1-importez-les-deux-bases-de-données-du-td2-et-joignez-les-et-créez-un-objet-d_join-et-enregistrez-cette-base-en-rds." class="level2">
<h2 class="anchored" data-anchor-id="question-1-importez-les-deux-bases-de-données-du-td2-et-joignez-les-et-créez-un-objet-d_join-et-enregistrez-cette-base-en-rds.">Question 1 : Importez les deux bases de données du TD2 et joignez les et créez un objet d_join et enregistrez cette base en RDS.</h2>
<p>Avant de commencer tout travail, il est important de bien préparer son projet et ses dossiers.</p>
<section id="a.-dabord-il-faut-setup" class="level3">
<h3 class="anchored" data-anchor-id="a.-dabord-il-faut-setup">A. D’abord il faut setup</h3>
<section id="a.-premièrement-créez-un-projet" class="level4">
<h4 class="anchored" data-anchor-id="a.-premièrement-créez-un-projet">a. Premièrement: créez un projet</h4>
<p>Pour créer un projet, cliquez sur l’icone R dans un cube en haut à droite de l’interface R studio. Cliquez ensuite sur “new projet”</p>
</section>
<section id="b.-deuxièmement-créez-les-3-fichiers" class="level4">
<h4 class="anchored" data-anchor-id="b.-deuxièmement-créez-les-3-fichiers">b. Deuxièmement : créez les 3 fichiers</h4>
<p>Dans la fenêtre “Files” cliquez sur l’icone dossier avec un + vert.</p>
<p>Creez 3 fichier: Un fichier “Scripts”, un fichier “Data”, un fichier “Results”.<br>
Ces fichiers servent à ranger vos scripts, vos données et vos tableaux et figures respectivement.<br>
Restez toujours organisé.</p>
</section>
<section id="c.-troisièmement-créez-votre-script" class="level4">
<h4 class="anchored" data-anchor-id="c.-troisièmement-créez-votre-script">c.&nbsp;Troisièmement : créez votre script</h4>
<p>Pour créer un script, cliquez sur la page blanche avec un + vert en haut à gauche d’R studio.</p>
<p>Votre script doit lui aussi être organisé et rangé: mettez toujours le titre du script, la date de création et de dernière modification ainsi que quattre tiret “----” après vos titre pour indiquer à R studio qu’il sagit d’un titre, et pouvoir vous y retrouver dans la section “Outline” (icone avec des traits horizontaux en haut à droite de la fenêtre du script).</p>
<p>Vous pouvez copier-coller cette organisation, mais trouvez la votre.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#           STAGE M2: TITRE DU SCRIPT ----</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de création: </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de dernière modification: </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Setup ----</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#__________----</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Packages à charger----</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Environnement à charger----</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Importation de la base ----</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Sous titre 1----</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Sous titre 2----</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="do">## c. Sous titre 3----</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="do">### i. sous-sous titre----</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________________________________________________________----</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Section 2 ----</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Sous titre 1----</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Sous titre 2----</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="do">## c. Sous titre 3----</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="do">### i. sous-sous titre----</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="d.-cinquièmement-chargez" class="level4">
<h4 class="anchored" data-anchor-id="d.-cinquièmement-chargez">d.&nbsp;Cinquièmement : chargez</h4>
<p>R fonctionne à l’aide de packages.<br>
Vous pouvez installer des packages en allant dans la fenêtre “Packages” -&gt; “Install”.<br>
Une fois installé, pour pouvoir utiliser le package vous devez le “charger”.</p>
<p><br>
Pour le charger, on utilise la fonction <code>library()</code>pour “bibliothèque”.<br>
Nous disons à R : “va chercher le package dans la bibliothèque des packages installés”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#           TD 2 Correction----</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de création: 03/10/2025</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Date de dernière modification: 03/10/2025</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Setup ----</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#__________----</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Packages à charger----</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(crosstable)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Environnement à charger----</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Importation de la base ----</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Sous titre 1----</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Sous titre 2----</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="do">## c. Sous titre 3----</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="do">### i. sous-sous titre----</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________________________________________________________----</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Section 2 ----</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Sous titre 1----</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Sous titre 2----</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="do">## c. Sous titre 3----</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="do">### i. sous-sous titre----</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="e.-sixièmement-se-rappelez-des-bases-et-de-la-logique-de-r" class="level4">
<h4 class="anchored" data-anchor-id="e.-sixièmement-se-rappelez-des-bases-et-de-la-logique-de-r">e. Sixièmement : se rappelez des bases et de la logique de R</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 39%">
<col style="width: 2%">
<col style="width: 23%">
<col style="width: 2%">
<col style="width: 19%">
<col style="width: 2%">
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Élément</td>
<td></td>
<td>Définition</td>
<td></td>
<td>Utilité</td>
<td></td>
<td>Utilisation</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td><strong>Objet</strong></td>
<td></td>
<td>Conteneur qui stocke une valeur (numérique, texte, vecteur, fonction, dataframe, etc.)</td>
<td></td>
<td>Permet de réutiliser et manipuler des données facilement</td>
<td></td>
<td><code>x &lt;- 42</code> <code>nom &lt;- "Alice"</code></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td><strong>Vecteur</strong></td>
<td></td>
<td>Suite ordonnée de valeurs du même type (numérique, texte, logique, etc.)</td>
<td></td>
<td>Structure de base en R pour stocker une série de données homogènes</td>
<td></td>
<td><code>v &lt;- c(1, 2, 3, 4)</code> <code>noms &lt;- c("a", "b", "c")</code></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td><strong>DataFrame</strong></td>
<td></td>
<td>Tableau de données en 2 dimensions, où chaque colonne est un vecteur (même longueur mais types différents possibles)</td>
<td></td>
<td>Manipulation de données structurées (comme une feuille Excel)</td>
<td></td>
<td><code>df &lt;- data.frame(nom=c("Alice","Bob"), age=c(25,30))</code></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td><strong>Fonction</strong></td>
<td></td>
<td><p>Bloc de code réutilisable qui prend des arguments et retourne un résultat.</p>
<p>Est toujours sous la forme : <code>nomdelafonction()</code></p></td>
<td></td>
<td>Automatise et réutilise des calculs ou analyses</td>
<td></td>
<td><p><code>nomdelafonction(argument 1 = X,</code></p>
<p><code>argument2=Y)</code></p></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="b.-ensuite-vous-pouvez-importer-et-joindre-les-bases-de-donnée" class="level3">
<h3 class="anchored" data-anchor-id="b.-ensuite-vous-pouvez-importer-et-joindre-les-bases-de-donnée">B. Ensuite vous pouvez importer et joindre les bases de donnée</h3>
<section id="a.-importer" class="level4">
<h4 class="anchored" data-anchor-id="a.-importer">a. Importer</h4>
<p>Dans la fenêtre de l’environnement, cliquez sur “Import”.<br>
En fonction de l’extension du dataset que vous voulez importer cliquez sur :<br>
- From text (readr) -&gt; si il est en .csv (attention au séparateur).<br>
- From excel -&gt; si il est en .xls ou xlsx.</p>
<p>Copier coller systématiquement les commandes dans votre script.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## b. Environnement/base à charger----</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Excel : ----</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>nhanes2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"Data/nhanes2.xlsx"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(nhanes2)  </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Educ csv ----</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>nhanes_educ <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"Data/nhanes_educ.csv"</span>, </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">delim =</span> <span class="st">";"</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(nhanes_educ)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="b.-joindre-les-bases" class="level4">
<h4 class="anchored" data-anchor-id="b.-joindre-les-bases">b. Joindre les bases</h4>
<p>Pour joindre les bases vous devez être clair avec ce que vous voulez.<br>
Ici, on veut joindre les bases pour récupérer le niveau d’éducation.<br>
Comme la dernière fois, on va comparer les deux data frames et on va essayer de comprendre les différences entre les deux pour pouvoir les joindre proprement.</p>
<p>Le but ici est de voir si il y a des personnes en plus dans le dataframe qui a le plus de lignes.<br>
Autrement dit, de voir si il y a des ID différents entre les deux dataframes.</p>
<p><br>
La logique que j’emploie ici est de prendre chaque valeur unique de la variable ID dans chaque dataframe, car je ne m’interesse pas ici encore aux ID qui reviennent plusieurs fois.</p>
<p>Je veux observer les différences entre les deux vecteurs ID, et je veux voir combien apparaissent en plus dans le dataframe avec le niveau d’éducation.<br>
</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0. Joindre les deux bases de données ----</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Pour que les lignes de nhanes_educ correspondent aux lignes de nhanes2</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Comment voir les ID différents entre les deux ----</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="at">x=</span> <span class="fu">unique</span>(nhanes_educ<span class="sc">$</span>ID), </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">y=</span> <span class="fu">unique</span>(nhanes2<span class="sc">$</span>ID)) <span class="sc">%&gt;%</span>  <span class="co"># Setdiff retourne les éléments de x qui                                      ne sont pas dans y dans un vecteur </span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>()                    <span class="co"># Donne la longueur du vecteur</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention si vous mettez nhanes2 en premier il vous donnera 0, car il donne le nombre en PLUS. Soyez Vigilent</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ici on voit que certains ID sont dans nhanes_educ mais pas dans nhanes2. </span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Est ce uniquement à cause de la number_survey? -&gt; non puisque nous avons utilisé unique() qui nous donne chaque ID une seule fois. </span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># On prendra tout de même uniquement ceux du dataframe nhanes2 car la majorité des données sont disponible pour eux. </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Comme au TD précédent, il y a en plus des ID différents des ID qui se répètent et qui correspondent à des vagues de réponse différents.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Joindre les deux bases---- </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>d_join<span class="ot">=</span><span class="fu">left_join</span>(<span class="at">x=</span>nhanes2, <span class="co"># premier argument</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y=</span>nhanes_educ, <span class="co"># deuxième argument</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">by=</span><span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"number_survey"</span>)) <span class="co"># troisième argument</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Vérifier que les bases ont été correctement join----</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(d_join) </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d_join<span class="sc">$</span>ID<span class="sc">==</span>nhanes2<span class="sc">$</span>ID) <span class="co"># == compare les deux éléments  </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous avons bien 4835 lignes comme nhanes2</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Les 4835 sont vrais, nous avons bien les mêmes ID</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Vous pouvez enregistrer cette base dans votre dossier du projet.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(<span class="at">object=</span>d_join,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">file=</span><span class="st">"Data/d_nhanes_join.rds"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
</section>
<section id="question-2-cherchez-les-variables-qui-correspondent-et-créez-un-nouvel-objet-pour-lenregistrer-dans-lenvironnement-appelé-d." class="level2">
<h2 class="anchored" data-anchor-id="question-2-cherchez-les-variables-qui-correspondent-et-créez-un-nouvel-objet-pour-lenregistrer-dans-lenvironnement-appelé-d.">Question 2: Cherchez les variables qui correspondent et créez un nouvel objet pour l’enregistrer dans l’environnement appelé d.</h2>
<blockquote class="blockquote">
<p>Votre maitre de stage veut que vous travailliez sur plusieurs variables : ID, le genre, Date de naissance, Race, Si oui ou non la personne travaille, Le poids la taille, la tension artérielle, Tabac, Activité physique, le niveau d’éducation, depressed, sleep.</p>
</blockquote>
<section id="a.-chercher-les-variables" class="level3">
<h3 class="anchored" data-anchor-id="a.-chercher-les-variables">A. Chercher les variables</h3>
<p>Vous avez plusieurs options pour chercher des variables dans un dataframe.<br>
Vous pouvez commencer par regarder les noms et décrire succintement le dataframe, cela vous donnera des indices.<br>
Souvent vous avez un descriptif des variables dans un fichier et un dictionnaire, mais parfois vous devez chercher des variables dans la base en tatonnant.</p>
<p><br>
Grace au tidyverse, vous pouvez chercher facilement parmis les noms de variable ce qui pourrait correspondre :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#____________________________________________________________________________----</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Sélection des variables demandés ----</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># j'essaie de trouver les variables qu'il me demande</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Gender, </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"naissance"</span>, <span class="st">"birth"</span>, <span class="st">"date"</span>,<span class="st">"age"</span>)) <span class="sc">|</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">contains</span>(<span class="st">"Age"</span>),</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"Race"</span>),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>         Work, Weight, Height, </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"BP"</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"smok"</span>),</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>         Education,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"PhysActive"</span>),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>         Depressed,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>         SleepTrouble,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>         Commentaires</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span>  <span class="fu">names</span>()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> names</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  Y a t il une date de naissance ? </span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Souvent dans les premières variables d'un data frame</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> names</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Peut être sous un format date? </span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.Date)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  names </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Aucun n'est sous format date. </span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="co"># On va regarder si certaines peuvent correspondre visuellement (souvent écrit en mode character)</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d_join) <span class="co"># ddn ressemble effectivement</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Qu'est ce que Race3?</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d_join<span class="sc">$</span>Race3) <span class="co">#Que des NA, je peux l'enlever</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Gender, ddn, </span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>         Race1,</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>         Work, Weight, Height, </span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"BP"</span>),</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"smok"</span>),</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>         Education,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"PhysActive"</span>),</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>         Depressed,</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>         SleepTrouble,</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>         Commentaires</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span>  <span class="fu">names</span>()</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Qu'est ce que Smoke100, Smoke100n </span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d_join<span class="sc">$</span>Smoke100)</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d_join<span class="sc">$</span>Smoke100)</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(crosstable)</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="fu">crosstable</span>(d_join,</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(Smoke100, Smoke100n),</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>           <span class="at">by=</span>SmokeNow) <span class="co"># On suppose que c'est smoke dans les 100 derniers jours,</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Comme on est pas sur, on veut prendre uniquement les fumeurs du moment :</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Gender, ddn, </span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>         Race1,</span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>         Work, Weight, Height, </span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"BP"</span>),</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>         SmokeNow,</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>         Education,</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>         <span class="fu">contains</span>(<span class="st">"PhysActive"</span>),</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>         Depressed,</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>         SleepTrouble,</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>         Commentaires</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span>  <span class="fu">names</span>()</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Qu'est ce que PhysActiveDays selon vous? </span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="fu">crosstable</span>(d_join,</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>           PhysActiveDays,</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>           <span class="at">by=</span>PhysActive)</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Nous on veut juste savoir si ils sont physically active oui ou non. </span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Gender, ddn, </span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>         Race1,</span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>         Work, Weight, Height, </span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"BP"</span>),</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>         SmokeNow,</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>         Education,</span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>         PhysActive,</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>         Depressed,</span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>         SleepTrouble,</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>         Commentaires</span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span>  <span class="fu">names</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="b.-creer-un-nouvel-objet-d-qui-sera-notre-base-de-travail" class="level3">
<h3 class="anchored" data-anchor-id="b.-creer-un-nouvel-objet-d-qui-sera-notre-base-de-travail">B. Creer un nouvel objet d qui sera notre base de travail</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________________________________________________________----</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Création de notre base de travail ----</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut maintenant le mettre dans un nouvel objet car on est sur des variables</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sélectionnées </span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d_join <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Gender, ddn, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         Race1,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>         Work, Weight, Height, </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">starts_with</span>(<span class="st">"BP"</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>         SmokeNow,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>         Education,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>         PhysActive,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>         Depressed,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>         SleepTrouble,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>         Commentaires</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co"># On veut visualiser globalement les données, voir sous quel formats ils sont maintenant: </span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="fu">look_for</span>(d)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="question-3-renommez-les-variables-en-français-pour-votre-confort-de-travail-à-laide-de-la-fonction-rename-ou-celle-que-vous-voulez" class="level2">
<h2 class="anchored" data-anchor-id="question-3-renommez-les-variables-en-français-pour-votre-confort-de-travail-à-laide-de-la-fonction-rename-ou-celle-que-vous-voulez">Question 3: Renommez les variables en français pour votre confort de travail à l’aide de la fonction rename() (ou celle que vous voulez)</h2>
<section id="a.-rappel-sur-le-pipe-et-le-tidyverse" class="level3">
<h3 class="anchored" data-anchor-id="a.-rappel-sur-le-pipe-et-le-tidyverse">A. Rappel sur le pipe et le tidyverse</h3>
<p>Le pipe du tidyverse c’est ce symbole : <code>%&gt;%</code> .<br>
Le raccourci clavier dans R studio c’est CTRL + Shift + M (Cmd sur Mac).</p>
<p>Cela sert beaucoup quand on a une suite d’argument.<br>
Le pipe fait “circuler” un objet (souvent un data frame) de gauche à droite, pour le placer en premier argument de la fonction suivante.</p>
<p>Exemple :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(ID)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Est l’équivalent de :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(d,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       ID)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Sur cet exemple on ne comprends pas trop l’intérêt, mais quand on a plusieurs fonctions d’affilé, cela rend les choses plus lisibles.<br>
Littéralement plus lisible: vous pouvez lire une fonction R en “Français” :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>v <span class="sc">%&gt;%</span>    </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span>  </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format</span>(<span class="at">decimal.mark =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"La moyenne est de "</span>,.,<span class="st">"."</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<blockquote class="blockquote">
<p>Ici la commande se traduit littéralement et facilement en :<br>
Prend v ET ENSUITE<br>
Fais en la moyenne PUIS<br>
Arrondi à un chiffre après la virgule PUIS<br>
Formate pour mettre une virgule PUIS<br>
Forme un message qui dira “La moyenne est de&nbsp;<strong><em>resultats des fonctions précédentes</em>.”</strong>&nbsp;PUIS<br>
Affiche le message.</p>
</blockquote>
<p><br>
Quand vous voulez que tout ce qu’il y a avant soit placé à un autre argument que le premier, il faut utiliser le “placeholder” <code>.</code></p>
<p>Exemple :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On veut afficher le message "Nombre de ligne" AVANT le résultat, donc on met le resultat après.</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">"Nombre de lignes:"</span>, .)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="b.-règles-à-respecter" class="level3">
<h3 class="anchored" data-anchor-id="b.-règles-à-respecter">B. Règles à respecter</h3>
<p>ATTENTION : quand vous renommez respectez les règles pour ne pas être embêter sur de futures manipulations et confort de codage:</p>
<ul>
<li>Tout est en minuscule</li>
</ul>
<!-- -->
<ul>
<li>Les nom en plusieurs mots sont séparés par _ ou une majuscule</li>
</ul>
<p>Personnellement je ne renome pas les variables d’origine, je renomme que quand je modifie la variable pour savoir exactement lesquels sont les variables d’origine et lesquelles sont des variables que j’ai créé.</p>
</section>
<section id="c.-la-fonction-rename" class="level3">
<h3 class="anchored" data-anchor-id="c.-la-fonction-rename">C. La fonction rename()</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Renommer les variables ----</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="do">## a. Renommer----</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># "Prend d et renome toutes les variables indiqués en argument et stocke ce nouveau dataframe dans un objet appelé d_rename"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>d_rename <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">identifiant     =</span> ID,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">genre           =</span> Gender,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_naissance  =</span> ddn,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">origine         =</span> Race1,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">emploi          =</span> Work,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">poids           =</span> Weight,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">taille          =</span> Height,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_sys_1   =</span> BPSys1,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_dia_1   =</span> BPDia1,</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_sys_2   =</span> BPSys2,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_dia_2   =</span> BPDia2,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_sys_3   =</span> BPSys3,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">tension_dia_3   =</span> BPDia3,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">fumeur_actuel   =</span> SmokeNow,</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">education       =</span> Education,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">actif_physique  =</span> PhysActive,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">depressif       =</span> Depressed,</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">troubles_sommeil =</span> SleepTrouble,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">commentaires    =</span> Commentaires</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="question-4-calculez-limc-poidstaille2-en-créant-une-variable-imc-avec-mutate-ou-autre" class="level2">
<h2 class="anchored" data-anchor-id="question-4-calculez-limc-poidstaille2-en-créant-une-variable-imc-avec-mutate-ou-autre">Question 4: Calculez l’IMC (poids/taille2) en créant une variable imc (avec mutate() ou autre)</h2>
<p>On à normalement vu plus tôt que le poids et la taille sont enregistrés en mode character, notamment grace à la fonction <code>str()</code>.<br>
On ne peut faire de calcul que si les variables sont “numeric”.<br>
Ce n’est convertible en numeric que si il y a rien d’autre que des chiffres dans le vecteur.</p>
<section id="a.-comment-créer-une-variable" class="level3">
<h3 class="anchored" data-anchor-id="a.-comment-créer-une-variable">A. Comment créer une variable ?</h3>
<p>Pour créer une variable on utilise la fonction <code>mutate()</code>.<br>
<code>mutate()</code> s’utilise toujours dans le cadre d’un dataframe. Il faudra toujours préciser dans quel dataframe on veut modifier la variable.</p>
<p>C’est à dire soit :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(d, <span class="co"># prend en premier argument le dataframe dont on veut modifier la variable</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">nouvelle_variable=</span>opération(ancienne_variable)) </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># On indique ensuite le nom de la nouvelle variable, puis = et ensuite les conditions pour la créer. </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Soit:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">mutate</span>( <span class="co"># prend en premier argument le dataframe dont on veut modifier la variable</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">nouvelle_variable=</span>opération(ancienne_variable)) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># On indique ensuite le nom de la nouvelle variable, puis = et ensuite les conditions pour la créer. </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<blockquote class="blockquote">
<p><strong>IMPORTANT : Dans R, il faut toujours préciser dans quel dataframe on travaille.</strong></p>
</blockquote>
<p>Mais ici, on a pas enregistré nos modifications, on a juste fait une opération.<br>
Pour enregistrer, comme toujours dans R, il faut l’enregistrer dans un objet.<br>
Si on veut l’enregistrer dans un nouvel objet sous la forme d’un nouveau dataframe, on a juste à écrire un nouveau nom.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nouveau_dataframe<span class="ot">=</span>d <span class="sc">%&gt;%</span> <span class="fu">mutate</span>( <span class="co"># prend en premier argument le dataframe dont on veut modifier la variable</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">nouvelle_variable=</span>opération(ancienne_variable))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Si on veut modifier notre dataframe d, il faut enregistrer notre nouveau dataframe au même nom d.&nbsp;R remplacera l’objet d par ce nouvel objet d qui contient les variables modifiées.</p>
<p>C’est pour ça que quand on veut modifier un dataframe ou une variable à l’intérieur, votre code commencera souvent par <code>d=d %</code> . Cela enregistrera vos modifications.</p>
<p>C’est la même logique dans <code>mutate()</code> .<br>
Si on veut “modifier” une variable, la logique est decréer une nouvelle variable qui à le même nom que l’ancien, sinon r créera une nouvelle variable avec le nouveau nom.<br>
</p>
<blockquote class="blockquote">
<p>La logique c’est : enregistrer quelque chose qui a le même nom la remplace</p>
</blockquote>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight=</span> <span class="fu">as.numeric</span>(Weight)) <span class="co"># Si on veut remplacer l'ancienne = la modif</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight_num=</span><span class="fu">as.numeric</span>(Weight)) <span class="co"># Si on veut garder l'ancienne et en créer une nouvelle.</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Personnellement j'aime bien garder les variables d'origine. </span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="b.-calculer-limc" class="level3">
<h3 class="anchored" data-anchor-id="b.-calculer-limc">B. Calculer l’IMC</h3>
<p>Ainsi, pour calculer l’IMC il y a deux choses à faire:</p>
<ul>
<li><p>Convertir la taille et le poids en numerique à l’aide de <code>mutate()</code> et <code>as.numeric()</code></p></li>
<li><p>Calculer l’IMC.</p></li>
</ul>
<p>Vous comprenez donc qu’il n’est pas possible de faire :<br>
</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>(Weight)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Même si c’est tentant.<br>
Pourquoi ? Si vous faites ça r vous dit “Object Weight not found” -&gt; Il ne reconnait pas comme variable ni comme vecteur.</p>
<p>Ce qu’on aurait pu faire en revanche sans tidyverse, c’est directement modifier le vecteur en le remplaçant :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>Weight<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(d<span class="sc">$</span>Weight)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Mais <code>mutate</code> permet de faire plusieurs opérations à la suite et cela permet de gagner du temps.</p>
<p>Nous pouvons donc créer l’IMC comme suit :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________________________________________________________----</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Calcul de l'IMC ----</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Version plus simple----</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight_num=</span><span class="fu">as.numeric</span>(Weight), <span class="co"># Crée une nouvelle variable Weight_num qui est la variable Weight                                          convertie en numérique</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Height_num=</span><span class="fu">as.numeric</span>(Height),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Height_m=</span> Height_num<span class="sc">/</span><span class="dv">100</span>, <span class="co"># L'imc est en kg/m2 et ici la variable est en centimètre</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">imc=</span>Weight_num<span class="sc">/</span> Height_m<span class="sc">^</span><span class="dv">2</span>) <span class="co"># le calcul de l'imc</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="c.-catégorisation-de-limc" class="level3">
<h3 class="anchored" data-anchor-id="c.-catégorisation-de-limc">C. Catégorisation de l’IMC</h3>
<p>Si on veut ensuite catégoriser l’IMC, on utilisera des fonctions permettant de créer une variable à l’aide de conditions.<br>
Les fonctions qui peuvent aider sont <code>ifelse()</code>et <code>case_when()</code>.</p>
<p><code>ifelse()</code> est simple d’utilisation mais peut s’avérer moins intuitif quand il y a trop de condition.<br>
C’est simple, elle prend trois arguments principaux :</p>
<ul>
<li><p>Premier argument : c’est la condition. “IF” Si tel variable est supérieur à tel autre, ou si tel variable == “catégorie” etc….</p></li>
<li><p>Deuxième argument : C’est ce que R va faire si la condition est TRUE.</p></li>
<li><p>Troisième argument: C’est ce que R va faire si la condition est FALSE.</p></li>
</ul>
<p>Exemple :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nouvelle_variable=</span><span class="fu">ifelse</span>(<span class="at">test=</span> ancienne_variable_num<span class="sc">&gt;</span><span class="dv">30</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">yes=</span> <span class="st">"Catégorie &gt;30"</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">no=</span> <span class="st">"Catégorie&lt;30"</span>))</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Souvent on l'écrit comme suit sans le nom des arguments :</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nouvelle_variable=</span><span class="fu">ifelse</span>(ancienne_variable_num<span class="sc">&gt;</span><span class="dv">30</span>,<span class="st">"Catégorie &gt;30"</span>, <span class="st">"Catégorie&lt;30"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Dans notre cas de catégorisation de l’IMC, il y a plusieurs conditions et donc plusieurs ifelse d’affilé :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">imc_cat =</span> <span class="fu">ifelse</span>(imc <span class="sc">&lt;</span> <span class="dv">25</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Normal"</span>, </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">ifelse</span>(imc <span class="sc">&lt;</span> <span class="dv">30</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Surpoids"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Obésité"</span>)))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Je m'explique : </span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">imc_cat =</span> <span class="fu">ifelse</span>(imc <span class="sc">&lt;</span> <span class="dv">25</span>, <span class="co"># test</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Normal"</span>, <span class="co"># si imc&lt;25 est TRUE</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>                          <span class="co"># si imc&lt;25 est FALSE applique ce qui suit: </span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">ifelse</span>(imc <span class="sc">&lt;</span> <span class="dv">30</span>, </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                                 <span class="co"># test: imc&lt;30 ET QUE IMC&lt;25 EST FALSE (son imc est compris entre 25 et 29)</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Surpoids"</span>, <span class="co"># si oui : c'est qu'il est en surpoids</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Obésité"</span>)))<span class="co"># si non : c'est q'il est en obésité</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Personnellement, pour éviter toute ambiguité et complexité j’utilise <code>case_when():</code></p>
<p>Cette fonction s’utilise comme suit, dans mutate :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nouvelle_variable=</span><span class="fu">case_when</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    condition1 <span class="sc">~</span> <span class="st">"Nouvelle catégorie 1 "</span>, <span class="co"># Si la condition 1 est vraie, créer la catégorie</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    condition2 <span class="sc">~</span> <span class="st">"Nouvelle catégorie 2 "</span>, <span class="co"># si la condition 2 est vraie</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    condition3 <span class="sc">~</span> <span class="st">"Nouvelle catégorie 3 "</span>, <span class="co"># si la condition 3 est vraie</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Nouvelle catégorie restante"</span> <span class="co"># si toutes les autres conditions sont fausses </span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  ))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Dans notre cas :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">imc_cat=</span><span class="fu">case_when</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"Normal"</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">25</span> <span class="sc">&amp;</span> imc<span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Surpoids"</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Obésité"</span>), <span class="co"># Catégorisation de l'IMC  </span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Au total :</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________________________________________________________----</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Calcul de l'IMC ----</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">#___________________________----</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Version plus simple----</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight_num=</span><span class="fu">as.numeric</span>(Weight), <span class="co"># Crée une nouvelle variable Weight_num qui est la variable Weight                                          convertie en numérique</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Height_num=</span><span class="fu">as.numeric</span>(Height),</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Height_m=</span> Height_num<span class="sc">/</span><span class="dv">100</span>, <span class="co"># L'imc est en kg/m2 et ici la variable est en centimètre</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">imc=</span>Weight_num<span class="sc">/</span> Height_m<span class="sc">^</span><span class="dv">2</span>, <span class="co"># le calcul de l'imc </span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">imc_cat=</span><span class="fu">case_when</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"Normal"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">25</span> <span class="sc">&amp;</span> imc<span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Surpoids"</span>,</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Obésité"</span>), <span class="co"># Catégorisation de l'IMC  </span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Version plus complexe----</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="do">##_____________________-----</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co"># D'abord convertir puis faire le calcul: </span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>d <span class="sc">%&gt;%</span> </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Weight, Height),  <span class="co"># across permet de faire les modifications sur plusieurs variables</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">as.numeric</span>(.),    <span class="co"># ~ permet d'appeler une fonction dans l'argument, ici convertir en num</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names=</span> <span class="st">"{.col}_num"</span>)) <span class="sc">%&gt;%</span> <span class="co"># Je veux que mes nouvelles variables s'appelle comme leur nom d'origine + _num</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Height_m=</span> Height_num<span class="sc">/</span><span class="dv">100</span>,  </span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">imc=</span><span class="fu">round</span>(Weight_num<span class="sc">/</span> ((Height_m)<span class="sc">^</span><span class="dv">2</span>)),</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">imc_cat=</span><span class="fu">case_when</span>(</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&lt;</span><span class="dv">25</span> <span class="sc">~</span> <span class="st">"Normal"</span>,</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">25</span> <span class="sc">&amp;</span> imc<span class="sc">&lt;</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Surpoids"</span>,</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>           imc<span class="sc">&gt;=</span><span class="dv">30</span> <span class="sc">~</span> <span class="st">"Obésité"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="d.-verifiez-toujours-vos-nouvelles-variables" class="level3">
<h3 class="anchored" data-anchor-id="d.-verifiez-toujours-vos-nouvelles-variables">D. VERIFIEZ TOUJOURS VOS NOUVELLES VARIABLES</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vérification:</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crosstable</span>(.,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>             d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="fu">c</span>(<span class="st">"num"</span>, <span class="st">"_m"</span>, <span class="st">"imc"</span>))) <span class="sc">%&gt;%</span> names)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">crosstable</span>(.,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                 imc,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by=</span>imc_cat) <span class="co"># Un IMC à 81 ???</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Y a t il un probleme de taille ou de poids pour certains d'entre eux? </span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(imc<span class="sc">&gt;=</span><span class="dv">40</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Weight_num, Height_m, imc) <span class="sc">%&gt;%</span> </span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">view</span>()</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ça à l'air cohérent</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>
